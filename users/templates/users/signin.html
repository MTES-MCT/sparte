{% extends 'index.html' %}

{% load crispy_forms_tags %}

{% block pagetitle %}Connexion{% endblock %}

{% block content %}

<div class="d-flex justify-content-center mt-5">
    <div class="col-12 col-md-5 col-lg-4">

        {% if next %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                {% if user.is_authenticated %}
                Vous n'avez pas accès à cette page, vos droits sont insuffisants.
                {% else %}
                Merci de vous connecter pour voir cette page.
                {% endif %}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}

        <h1 class="mb-5 fw-bold text-center">Connexion</h1>

        <form {% if next %}action="?next={{ next }}" {% endif %}method="post">
            {% csrf_token %}
            {{ form|crispy }}
            <button class="fr-btn mt-2" type="submit">Se connecter</button>
        </form>

        <p class="mb-0 fs-sm text-center text-muted">
            Mot de pass oublié ? <a href="{% url 'password_reset' %}">Réinitialisez le</a>.
            <br/>Pas encore de compte ? <a href="{% url 'users:signup' %}">Inscrivez-vous</a>.
        </p>
    </div>
</div>

{% endblock %}

{% block tagging %}
<script language="javascript" nonce="{{ CSP_NONCE }}">
$( window ).on('load', function () {
    _paq.push(['trackEvent', 'Connexion', 'Ouverture'])
})
</script>
{% endblock tagging %}
