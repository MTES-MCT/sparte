{% extends 'index.html' %}

{% load static %}
{% load crispy_forms_tags %}
{% load project_tags %}

{% block pagetitle %}
SPARTE
{% endblock %}

{% block headers %}
<link href="{% static 'project/css/project.css' %}" rel="stylesheet" />
{% endblock %}


{% block content %}
<div class="row w-100 justify-content-center">

    <div class="col-12 col-md-8 col-lg-6 bg-light p-5 rounded-5 border mt-1">
        <h1 class="mb-5">{{ project.name }}</h1>

        <div class="row gx-2">
            <div class="col">
                <div class="box mt-0 p-4 text-center">
                    <a href="{% url 'project:report' project.pk %}" data-toggle="tooltip" title="Rapports" class="me-1">
                        <i class="bi bi-graph-down"></i>
                        <br/><strong>Tableau de bord</strong>
                    </a>
                    <br/>Synthèse de la consommation, de l'artificialisation...
                </div>
            </div>
            <div class="col">
                <div class="box mt-0 p-4 text-center">
                    <a href="{% url 'project:map' project.pk %}" data-toggle="tooltip" title="Carte intéractive">
                        <i class="bi bi-map"></i>
                        <br/><strong>Carte interactive</strong>
                    </a>
                    <br/>Explorer les zones artificielles et celles renaturées...
                </div>
            </div>
        </div>

        <div class="box p-4  mt-2">
            <a class="float-end" href="{% url 'project:update' project.pk %}">
                <i class="bi bi-pencil"></i>
            </a>
            <h3 class="mb-2">Période d'analyse</h3>
            <p>De {{ project.analyse_start_date }} à {{ project.analyse_end_date }}</p>
        </div>

        <div class="box p-4 mt-2">
            <a class="float-end" href="{% url 'project:update' project.pk %}">
                <i class="bi bi-pencil"></i>
            </a>
            <h3 class="mb-2">Description</h3>
            {% if project.description %}
                <p>{{ project.description }}</p>
            {% else %}
                <p class="text-muted">Aucune description.</p>
            {% endif %}
        </div>

        <div class="box p-4  mt-2">
            <a class="float-end" href="{% url 'project:lookalike' project.id %}">
                <i class="bi bi-plus-circle"></i>
            </a>
            <h3 class="mb-2">Territoires de comparaison</h3>
            {% if project.look_a_like %}
                <ul>
                {% for land in project.get_look_a_like %}
                    <li><a href="{% url 'project:lookalike' project.id %}?remove={{ land.public_key }}"><i class="bi bi-trash text-danger"></i></a> {{ land.name }}</li>
                {% endfor %}
                </ul>
            {% else %}
            <p class="text-muted">Aucun territoire.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block sub_bar_actions %}

<li class="nav-item ms-1">
    <a class="btn btn-sm btn-outline-primary" href="{% url 'project:update' project.pk %}">
        <i class="bi bi-pencil"></i> Editer
    </a>
</li>
{% if user.is_authenticated %}
<li class="nav-item ms-1">
    <a class="btn btn-sm btn-outline-warning" href="{% url 'project:reinit' project.pk %}">
        <i class="bi bi-recycle"></i> Ré-initialiser
    </a>
</li>
<li class="nav-item ms-1">
    <a class="btn btn-sm btn-outline-danger" href="{% url 'project:delete' project.pk %}">
        <i class="bi bi-trash"></i> Supprimer
    </a>
</li>
{% endif %}
{% endblock %}

{% block bodyend %}
{% endblock %}
